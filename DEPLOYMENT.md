# ScanSec Deployment Guide

This guide covers deploying ScanSec to production using Vercel (frontend) and Render (backend).

## üöÄ Quick Deployment

### Frontend (Vercel)

1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Ready for deployment"
   git push origin main
   ```

2. **Deploy to Vercel**
   - Go to [vercel.com](https://vercel.com)
   - Import your GitHub repository
   - Set root directory to `frontend`
   - Add environment variable:
     - `REACT_APP_API_URL`: Your backend URL (e.g., `https://scansec-backend.onrender.com`)

3. **Configure Domain** (Optional)
   - Add custom domain in Vercel dashboard
   - Update CORS origins in backend

### Backend (Render)

1. **Push to GitHub** (same repository)

2. **Deploy to Render**
   - Go to [render.com](https://render.com)
   - Create new Web Service
   - Connect your GitHub repository
   - Set build command: `pip install -r requirements.txt`
   - Set start command: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`
   - Add environment variables:
     - `DATABASE_URL`: Auto-generated by Render
     - `SECRET_KEY`: Generate with `openssl rand -hex 32`
     - `ALGORITHM`: `HS256`
     - `ACCESS_TOKEN_EXPIRE_MINUTES`: `30`
     - `CLAUDE_API_KEY`: Your Claude API key (optional)

3. **Database Setup**
   - Render will auto-create PostgreSQL database
   - Tables will be created on first startup

## üîß Environment Variables

### Frontend (.env)
```env
REACT_APP_API_URL=https://your-backend-url.onrender.com
```

### Backend (.env)
```env
DATABASE_URL=postgresql://user:password@host:port/db
SECRET_KEY=your-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
CLAUDE_API_KEY=your-claude-api-key
```

## üõ†Ô∏è Local Development

### Backend
```bash
cd ScanSec
pip install -r requirements.txt
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### Frontend
```bash
cd frontend
npm install
npm start
```

## üîí Security Considerations

1. **API Keys**: Never commit API keys to version control
2. **CORS**: Configure allowed origins for production
3. **Database**: Use strong passwords and SSL connections
4. **HTTPS**: Always use HTTPS in production

## üìä Monitoring

### Health Checks
- Backend: `GET /health`
- Frontend: Built-in Vercel monitoring

### Logs
- Backend: Render dashboard
- Frontend: Vercel dashboard

## üö® Troubleshooting

### Common Issues

1. **CORS Errors**
   - Check CORS origins in `app/main.py`
   - Ensure frontend URL is in allowed origins

2. **Database Connection**
   - Verify DATABASE_URL format
   - Check database credentials

3. **AI Recommendations Not Working**
   - Verify CLAUDE_API_KEY is set
   - Check API key permissions

4. **Build Failures**
   - Check requirements.txt
   - Verify Python version compatibility

### Debug Commands

```bash
# Check backend health
curl https://your-backend.onrender.com/health

# Test database connection
python -c "from app.database import engine; print('DB OK')"

# Check AI status
curl https://your-backend.onrender.com/scan/ai-status
```

## üìà Performance Optimization

1. **Database Indexing**
   - Add indexes for frequently queried columns
   - Monitor query performance

2. **Caching**
   - Implement Redis for session storage
   - Cache scan results

3. **CDN**
   - Use Vercel's global CDN
   - Optimize static assets

## üîÑ CI/CD Pipeline

### GitHub Actions (Optional)

```yaml
name: Deploy
on:
  push:
    branches: [main]
jobs:
  deploy-backend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy to Render
        run: |
          # Add your deployment steps
```

## üìù Post-Deployment Checklist

- [ ] Backend health check passes
- [ ] Frontend loads without errors
- [ ] User registration works
- [ ] Scan functionality works
- [ ] AI recommendations work (if API key set)
- [ ] Export functionality works
- [ ] History page loads
- [ ] CORS is properly configured
- [ ] Environment variables are set
- [ ] Database tables are created
- [ ] SSL certificates are valid

## üÜò Support

For deployment issues:
1. Check Render/Vercel logs
2. Verify environment variables
3. Test endpoints individually
4. Check CORS configuration
5. Verify database connectivity

## üîÑ Updates

To update the application:
1. Push changes to GitHub
2. Vercel will auto-deploy frontend
3. Render will auto-deploy backend
4. Monitor deployment logs
5. Test functionality after deployment 